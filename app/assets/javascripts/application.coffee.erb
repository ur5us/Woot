#= require_self
#= require_tree ./mixins
#= require_tree ./models
#= require_tree ./controllers
#= require_tree ./components
#= require_tree ./views
#= require_tree ./helpers
#= require_tree ./templates
#= require_tree ./routes

this.App = Ember.Application.create
  clock: 0
<% if Rails.env.development? %>
  LOG_TRANSITIONS: true
  LOG_TRANSITIONS_INTERNAL: true
<% end %>

  ready: ->
    @scheduleClockUpdate()

  scheduleClockUpdate: ->
    Em.run.later(@, @updateGlobalClock, 5000)

  updateGlobalClock: ->
    @incrementProperty('clock')
    Em.run.once ->
      App.Post.all()
    @scheduleClockUpdate()
