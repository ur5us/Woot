!function(){this.App=Ember.Application.create({clock:0,ready:function(){return this.scheduleClockUpdate()},scheduleClockUpdate:function(){return Em.run.later(this,this.updateGlobalClock,5e3)},updateGlobalClock:function(){return this.incrementProperty("clock"),Em.run.once(function(){return App.Post.all()}),this.scheduleClockUpdate()}})}.call(this),function(){App.ForgotPasswordControllerMixin=Em.Mixin.create({actions:{resetPassword:function(){var e;return this.set("isRequesting",!0),e=this.get("model").request(),e.then(function(e){return function(){return e.send("reset"),e.set("isRequesting",!1),e.transitionToRoute("forgot_password.success")}}(this)),e["catch"](function(e){return function(t){var n;return n=(t="Unprocessable Entity")?"No new password given":"Unknown token supplied",App.Alert.add({message:n,severity:"error"}),e.set("isRequesting",!1)}}(this))},reset:function(){return this.setProperties({token:null,newPassword:null})}}})}.call(this),function(){App.ProtectedRouteMixin=Em.Mixin.create({beforeModel:function(){var e;return e=this.modelFor("application"),e.get("hasUser")?void 0:this.transitionTo("users.signIn")}})}.call(this),function(){App.ProtectedUserRouteMixin=Em.Mixin.create({model:function(){return this.modelFor("user")},afterModel:function(e){var t;return t=this.modelFor("application"),e.get("id")!==t.get("user.id")?this.transitionTo("index"):void 0}})}.call(this),function(){App.SignInControllerMixin=Em.Mixin.create({needs:["application"],sessionTokenBinding:"controllers.application.model",init:function(){return this._super(),this.send("reset")},username:null,password:null,errors:null,rememberMe:!1,hasUsername:Em.computed.bool("username"),hasPassword:Em.computed.bool("password"),signInButtonEnabled:Em.computed.and("hasUsername","hasPassword"),signInButtonDisabled:Em.computed.not("signInButtonEnabled"),actions:{reset:function(){return this.setProperties({username:null,password:null,errors:null,rememberMe:!1})},attemptSignIn:function(){var e,t,n,s;return t=function(e){return function(t){return t.get("user").then(function(t){return t.get("session").refresh(t).then(function(){return e.send("authenticationDidSucceed",t)})})}}(this),e=function(e){return function(){return e.send("authenticationFailed")}}(this),s=this.get("username"),n=this.get("password"),this.get("sessionToken").authenticate(s,n).then(t,e)},authenticationDidSucceed:function(e){return this.get("rememberMe")&&this.send("storeApiSecret",e),this.send("reset"),this.transitionToRoute("user.index",e)},authenticationFailed:function(){return this.set("errors",Em.Object.create({password:["Authentication failed"]}))},storeApiSecret:function(e){return e.get("hasApiSecret")?(localStorage.api_username=e.get("username"),localStorage.api_secret=e.get("apiSecret")):void 0}}})}.call(this),function(){var e;e=[],App.Post=Em.Object.extend({nickname:null,body:null,createdAt:function(){return new Date(this.get("created_at"))}.property("created_at"),updatedAt:function(){return new Date(this.get("updated_at"))}.property("updated_at")}),App.Post.reopenClass({all:function(){return Em.run(function(){return function(){return new Em.RSVP.Promise(function(t,n){return $.ajax({dataType:"json",url:"/posts",type:"GET",success:function(n){var s,r,a,o,i;for(i=n.posts,a=0,o=i.length;o>a;a++)r=i[a],e.anyBy("id",r.posts.id)||(s=App.Post.create(),s.setProperties(r.posts),e.pushObject(s));return t(e)},error:function(e,t,s){return console.log(e,t,s),n(s)}})})}}(this))},add:function(t){return null==t&&(t={}),Em.run(function(){return function(){return new Em.RSVP.Promise(function(n,s){return $.ajax({dataType:"json",data:{post:t},url:"/posts",type:"POST",success:function(t){var s;return s=App.Post.create(),s.setProperties(t),e.pushObject(s),n(s)},error:function(e,t,n){return console.log(e,t,n),s(n)}})})}}(this))}})}.call(this),function(){App.ApplicationController=Em.ArrayController.extend({init:function(){return this._super(),this.set("nickname",localStorage.nickname)},hasNickname:Em.computed.bool("nickname"),nickname:null,sortProperties:["createdAt"],sortAscending:!1,postDisabled:function(){return Em.isEmpty(this.get("newBody"))}.property("newBody"),actions:{useNickname:function(){var e;return e=this.get("newNickname"),localStorage.nickname=e,this.set("nickname",e),!1},createPost:function(){return Em.isEmpty(this.get("newBody"))?void 0:App.Post.add({nickname:this.get("nickname"),body:this.get("newBody")}).then(function(e){return function(){return e.set("newBody",null)}}(this))}}})}.call(this),function(){App.PostController=Em.ObjectController.extend({needs:["application"],mentionsMe:function(){var e;return e=this.get("body"),e.search("@"+localStorage.nickname)>0}.property("body"),actions:{reply:function(){return this.set("controllers.application.newBody","@"+this.get("nickname")+" "),$('input[name="post"]').focus()}}})}.call(this),function(){App.PostsController=Em.ArrayController.extend()}.call(this),function(){App.UserQueryController=Em.ObjectController.extend({needs:"application",contentBinding:"controllers.application"})}.call(this),function(){var e;e=function(e,t){return null==t&&(t=void 0),Em.isEmpty(t)?('<span class="date">'+e+"</span>").htmlSafe():('<span class="date" title="'+t+'">'+e+"</span>").htmlSafe()},Em.Handlebars.helper("timeAgo",function(t){var n;return n=moment(t),e(n.fromNow(),n.format("Mo of MMMM YYYY at H:mm:ss a"))}),Em.Handlebars.helper("dateAgo",function(t){var n,s;return s=moment(t),n=s.calendar().split(" at")[0].toLowerCase(),e(n,s.format("dddd Mo of MMMM YYYY"))}),Em.Handlebars.helper("dateWithYear",function(t){var n;return n=moment(t),e(n.format("MMMM Do YYYY"),n.format("dddd Mo of MMMM YYYY"))})}.call(this),Ember.TEMPLATES.application=Ember.Handlebars.template(function(e,t,n,s,r){function a(e,t){var s,r,a="";return t.buffer.push("<form "),t.buffer.push(l(n.action.call(e,"createPost",{hash:{on:"submit"},hashTypes:{on:"STRING"},hashContexts:{on:e},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(" class='panel new-post'>\n      <div class='row'>\n        <div class='small-12 large-12 columns'>\n          "),t.buffer.push(l((s=n.input||e&&e.input,r={hash:{type:"text",name:"post",value:"newBody"},hashTypes:{type:"ID",name:"STRING",value:"ID"},hashContexts:{type:e,name:e,value:e},contexts:[],types:[],data:t},s?s.call(e,r):c.call(e,"input",r)))),t.buffer.push("\n        </div>\n      </div>\n      <div class='row'>\n        <div class='small-12 large-12 columns'>\n          <button "),t.buffer.push(l(n["bind-attr"].call(e,{hash:{disabled:"postDisabled"},hashTypes:{disabled:"STRING"},hashContexts:{disabled:e},contexts:[],types:[],data:t}))),t.buffer.push(" "),t.buffer.push(l(n.action.call(e,"createPost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(" class='postfix'>\n            W00t!\n          </button>\n        </div>\n      </div>\n    </form>\n    "),t.buffer.push(l((s=n.render||e&&e.render,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["STRING","ID"],data:t},s?s.call(e,"posts","arrangedContent",r):c.call(e,"render","posts","arrangedContent",r)))),t.buffer.push("\n    "),a}function o(e,t){var s,r,a="";return t.buffer.push("\n    "),t.buffer.push(l((s=n.render||e&&e.render,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"userQuery",r):c.call(e,"render","userQuery",r)))),a}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,Ember.Handlebars.helpers),r=r||{};var i,u="",l=this.escapeExpression,c=n.helperMissing,p=this;return r.buffer.push("<div class='container'>\n  <div class='row large-12 small-12 large-centred columns'>\n    <h1>W00t!</h1>\n    "),i=n["if"].call(t,"hasNickname",{hash:{},hashTypes:{},hashContexts:{},inverse:p.program(3,o,r),fn:p.program(1,a,r),contexts:[t],types:["ID"],data:r}),(i||0===i)&&r.buffer.push(i),r.buffer.push("\n  </div>\n</div>\n"),u}),Ember.TEMPLATES.posts=Ember.Handlebars.template(function(e,t,n,s,r){function a(e,t){var s,r,a,o="";return t.buffer.push("<div "),t.buffer.push(u(n["bind-attr"].call(e,{hash:{"class":":panel :post mentionsMe:callout::"},hashTypes:{"class":"STRING"},hashContexts:{"class":e},contexts:[],types:[],data:t}))),t.buffer.push(">\n  <div class='row'>\n    <div class='small-8 large-8 columns nickname'>\n      @"),s=n._triageMustache.call(e,"post.nickname",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n    <div class='small-4 large-4 columns time-ago'>\n      "),t.buffer.push(u((r=n.timeAgo||e&&e.timeAgo,a={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e],types:["ID","ID"],data:t},r?r.call(e,"post.createdAt","App.clock",a):l.call(e,"timeAgo","post.createdAt","App.clock",a)))),t.buffer.push("\n    </div>\n  </div>\n  <div class='row'>\n    <div class='small-12 large-12 columns body'>\n      "),s=n._triageMustache.call(e,"post.body",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\n    </div>\n  </div>\n  <div class='row'>\n    <div class='small-12 large-12 columns'>\n      <button "),t.buffer.push(u(n.action.call(e,"reply",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t}))),t.buffer.push(" class='tiny right'>Reply</button>\n    </div>\n  </div>\n</div>"),o}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,Ember.Handlebars.helpers),r=r||{};var o,i="",u=this.escapeExpression,l=n.helperMissing,c=this;return o=n.each.call(t,"post","in","controller",{hash:{itemController:"post"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:t},inverse:c.noop,fn:c.program(1,a,r),contexts:[t,t,t],types:["ID","ID","ID"],data:r}),(o||0===o)&&r.buffer.push(o),r.buffer.push("\n"),i}),Ember.TEMPLATES.user_query=Ember.Handlebars.template(function(e,t,n,s,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,Ember.Handlebars.helpers),r=r||{};var a,o,i="",u=this.escapeExpression,l=n.helperMissing;return r.buffer.push("<div class='nickname-entry'>\n  <h1>Enter your nickname</h1>\n  <form "),r.buffer.push(u(n.action.call(t,"useNickname",{hash:{on:"submit"},hashTypes:{on:"ID"},hashContexts:{on:t},contexts:[t],types:["STRING"],data:r}))),r.buffer.push(">\n    "),r.buffer.push(u((a=n.input||t&&t.input,o={hash:{type:"text",name:"nickname",value:"newNickname"},hashTypes:{type:"ID",name:"STRING",value:"ID"},hashContexts:{type:t,name:t,value:t},contexts:[],types:[],data:r},a?a.call(t,o):l.call(t,"input",o)))),r.buffer.push("\n  </form>\n</div>\n"),i}),function(){App.ApplicationRoute=Em.Route.extend({model:function(){return App.Post.all()}})}.call(this);